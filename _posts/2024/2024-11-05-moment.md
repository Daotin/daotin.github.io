---
layout: mypost
title: moment or dayjs or date-fns?
tags: [前端]
---

## 背景

一直使用 moment，今天看到还有很多其它的选择，所以来了解一下。

## 分析

### Moment.js

优点：

- 功能全面，提供丰富的日期处理方法，如解析、验证、操作和格式化等。
- API 设计直观，易于上手。
- 支持国际化，内置多种语言和时区处理。

缺点：

- 包体积较大，可能影响应用性能。
- 对象是可变的（mutable），可能导致意外的副作用。
- 自 2020 年起已停止积极开发，仅进行维护，社区活跃度下降。

### Day.js

优点：

- 体积小，核心库仅约 2KB，适合性能敏感的项目。
- API 与 Moment.js 高度兼容，迁移成本低。
- 不可变数据（immutable），避免副作用。
- 通过插件机制扩展功能，灵活性高。

缺点：

- 某些高级功能需要额外引入插件，增加复杂度。
- 虽然社区活跃，但生态系统相对较小。

### date-fns

优点：

- 采用函数式编程风格，模块化设计，可按需引入，支持 tree-shaking，减少包体积。
- 不可变数据（immutable），提高代码可靠性。
- 功能丰富，提供多种日期处理函数。

缺点：

- API 与 Moment.js 差异较大，学习曲线相对陡峭。
- 虽然模块化设计，但整体包体积较大。
- 社区活跃度相对较低。

### 综合对比(截止 2024-11-05)

| 特性               | Moment.js | Day.js | date-fns |
| ------------------ | --------- | ------ | -------- |
| **GitHub Stars**   | 48k       | 46.9k  | 34.8k    |
| **包体积(未压缩)** | 4.4MB     | 670KB  | 23MB     |
| **功能完整度**     | 高        | 中     | 高       |
| **使用简易程度**   | 高        | 高     | 中       |
| **成熟度**         | 高        | 中     | 中       |
| **社区活跃度**     | 中        | 高     | 中       |
| **不可变性**       | 否        | 是     | 是       |
| **模块化**         | 否        | 是     | 是       |
| **国际化支持**     | 是        | 是     | 是       |

## 总结

- 如果您需要功能全面且成熟的日期处理库，且对包体积要求不高，Moment.js 是合适的选择。
- 如果您希望在保持功能的同时，减少包体积，并且需要与 Moment.js 兼容的 API，Day.js 是不错的选择。
- 如果您偏好函数式编程，注重模块化和 tree-shaking，且能接受较大的学习成本，date-fns 是合适的选择。

> 我：不用犹豫，直接选 dayjs 就完了。
>
> moment 不维护了，包体积也大，pass；
>
> date-fns 体积太大，文档太乱，即便是有 tree-shaking，可随便引入一个 parse 解析日期字符串，就有 98.5KB，而 dayjs 就 2kB，直接碾压~
