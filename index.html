---
layout: page
title: 首页
---

<div class="page page-index">
  {% assign count = 0 %} {# 初始化文章计数器 #}
  {% for post in site.posts %}
    {% capture post_year %}{{ post.date | date: "%Y" }}{% endcapture %}
    {% capture post_previous_year %}{{ post.previous.date | date: "%Y" }}{% endcapture %}
    {% capture post_next_year %}{{ post.next.date | date: "%Y" }}{% endcapture %}

    {% if forloop.first or post_next_year != post_year %}
      {% if forloop.first == false %}
        </ul>
        </div>
      {% endif %}
      <div class="list-post">
        <h2 id="{{ post_year }}">{{ post_year }} ({{ count }})</h2> {# 显示上一年的计数 #}
        <ul>
      {% assign count = 0 %} {# 重置计数器 #}
    {% endif %}
    <li>
      <span class="date">{{ post.date | date: "%Y/%m/%d" }}</span>
      <div class="title">
        <a href="{{ site.baseurl | append: post.url }}" class="hover-underline">{{ post.title }}</a>
      </div>
      <div class="tags">
        {% for tag in post.tags %}
        <a href="{{site.baseurl}}/pages/tags.html#{{ tag }}">{{ tag }}</a>
        {% endfor %}
      </div>
    </li>
    {% assign count = count | plus: 1 %} {# 更新计数器 #}

    {% if forloop.last or post_previous_year != post_year %}
      <h2 id="{{ post_year }}">{{ post_year }} ({{ count }})</h2> {# 显示当前年份计数 #}
      </ul>
    </div>
    {% endif %}
  {% endfor %}
</div>
